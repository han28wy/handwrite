<html>
  <head>
    333
  </head>
  <body>
    <br />
    <button id="debounce1">点我防抖！</button>
    <button id="throttle">点我节流！</button>
  </body>
  <script>
    ///////////////////////////////////////
    window.onload = function () {
      var myDebounce = document.getElementById("debounce1");
      myDebounce.addEventListener("click", debounce(sayDebounce));
    };
    function debounce(fn) {
      console.log("我在执行debounce");
      let timeout = null;
      return function () {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          fn.call(this, arguments);
        }, 1000);
      };
    }
    function sayDebounce() {
      console.log("防抖成功！");
      document.addEventListener("click", function (e) {
        console.log(e.clientX);
      });
    }

    /////////////////////////
    window.onload = function () {
      var mythrottle = document.getElementById("throttle");
      mythrottle.addEventListener("click", throttle(test2));
    };
    // 节流
    function throttle(fn) {
      console.log('我在click')
      let flag = true
      return function() {
        if (flag) {
        setTimeout(() => {
          fn.apply(this, arguments);
          // 最后在setTimeout执行完毕后再把标记设置为true(关键)
          // 表示可以执行下一次循环了。
          flag = true;
        }, 2000);
      }
      flag = false
      }
    }
    function test2() {
      console.log("tttest ");
    }
  </script>
</html>
